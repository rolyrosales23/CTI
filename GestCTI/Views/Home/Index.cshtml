@{
    ViewBag.Title = "Home Page";
}

@section css{
    <link href="~/assets/Icons/style.css" rel="stylesheet" />
}

<!-- PAGE TITLE
<div class="page-title">
    <h2><span class="fa fa-columns"></span> Agent Work Page</h2>
</div>
 END PAGE TITLE -->

<div class="row">
    <div class="col-sm-4 col-md-3" id="keypad">
        <div class="col-md-12 col-lg-10">
            @Html.Partial("../Supervisor/_PartialPhone")
        </div>
    </div>

    <div class="col-sm-8 col-md-9">
        <div class="panel panel-default tabs">
            <ul class="nav nav-tabs" role="tablist">
                <li id="tab1" class="active">
                    <a href="#tab-first" role="tab" data-toggle="tab">Scripts</a>
                </li>
                <li id="tab2"><a href="#tab-second" role="tab" data-toggle="tab">@Resources.Agent.HoldCalls</a></li>
            </ul>

            <div class="panel-body tab-content">
                <div class="tab-pane active" id="tab-first">

                </div>

                <div class="tab-pane" id="tab-second">
                    <div class="panel panel-warning">
                        <div class="panel-body list-group list-group-contacts" id="lista_espera">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script type='text/javascript' src='~/assets/js/plugins/jquery-validation/jquery.validate.js'></script>
<script type='text/javascript' src='~/assets/js/plugins/bootstrap/bootstrap-select.js'></script>

@Html.Partial("_Dispositions")
@Html.Partial("_PauseCodes")
@Html.Partial("_Campaigns")

@section scripts{
    <script type="text/javascript">
        $('#inputPhone').keyup(function () {
            if ($(this).val())
                $("#doCallBtn").removeAttr("disabled");
            else
                $("#doCallBtn").attr("disabled", "disabled");
        });

        $('#lista_espera').on("ifChanged", "input", function (event) {
            changeState('retrieve', true);
            changeState('transfer', true);
            changeState('conference', true);
        });
    </script>

    <script src="~/assets/js/plugins/icheck/icheck.min.js"></script>

    <script type="text/javascript">
        function pintarScript(url, data = null) {
            if (url[0] == '/') {
                url = '@Url.Action("Display", "Scripts")' + url;
                data = JSON.stringify(data);
            }

            $('#tab-first *').remove();
            if (notEmpty(url)) {
                $.ajax({
                    url: url,
                    data: { 'data': data },
                    success: function (html) {
                        $('#tab-first').html(html);
                    },
                    error: function (error) {
                        errorNoty(error.responseText);
                    }
                });
            }
        }

        $(window).scroll(function () {
            $("#keypad").css("top", Math.max(0, $(this).scrollTop() - 15));
        });
    </script>
}